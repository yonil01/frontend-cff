

<app-layout>
  <div class='container'>
    <div class='card'>
      <div class='card-header'>
        <h1>Lista de Asistencia</h1>
      </div>
      <div class='card-body'>
        <div>
          <div class=""><button routerLink="create" type="button" class="btn btn-primary">Crear Asistencia</button></div>
          <div class="p-5">
            <div>
              <div class="card">
                <div class="card-header">
                  Filtro Asistencia
                </div>
                <div class="card-body">
                  <form class="py-2" [formGroup]="AttendanceFilterFormGroup">
                    <div class="container">
                      <div class="row w-100 d-flex">
                        <div class="form-group mt-4 col-md-6">
                          <label>Eventos</label>
                          <div class="dropdown">
                            <a class="btn btn-secondary dropdown-toggle form-control form-control-lg d-flex justify-content-between align-items-center" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                              <span>{{ eventSelect?.description || 'Selecciona un evento' }}</span>
                              <span><i class="fas fa-chevron-down"></i></span>
                            </a>
                            <ul class="dropdown-menu w-100" aria-labelledby="dropdownMenuLink">
                              <li *ngFor="let event of listEvent" [ngClass]="{'active': event.id === eventSelect?.id}">
                                <a class="dropdown-item" (click)="selectEvent(event.id)">{{ event.description }}</a>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="form-group mt-4 col-md-6">
                          <label>Promoción</label>
                          <div class="dropdown">
                            <a class="btn btn-secondary dropdown-toggle form-control form-control-lg d-flex justify-content-between align-items-center" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                              <span>{{ promotionSelect?.name || 'Selecciona una promoción' }}</span>
                              <span><i class="fas fa-chevron-down"></i></span>
                            </a>
                            <ul class="dropdown-menu w-100" aria-labelledby="dropdownMenuLink">
                              <li *ngFor="let promotion of listPromotion" [ngClass]="{'active': promotion.id === promotionSelect?.id}">
                                <a class="dropdown-item" (click)="selectPromotion(promotion.id)">{{ promotion.name }}</a>
                              </li>
                            </ul>
                          </div>
                        </div>

                      </div>
                      <div class="row w-100 d-flex">
                        <div class="form-group mt-4 col-md-6">
                          <label >Fecha</label>
                          <input
                            formControlName="date_attendance"
                            type="text"
                            class="form-control"
                            #dp="bsDatepicker"
                            bsDatepicker
                          />
                        </div>
                      </div>


                    </div>
                    <div class="w-100 mt-4 d-flex justify-content-center">
                      <button type="submit" class="btn btn-primary w-50 mx-auto" (click)="getInfoAttendance()">Buscar</button>
                    </div>
                  </form>
                </div>
              </div>
              <table class="table mt-5">
                <thead class="thead-dark">
                <tr>
                  <th scope="col">Id</th>
                  <th scope="col">Codigo</th>
                  <th scope="col">Nombre</th>
                  <th scope="col">Apellido Paterno</th>
                  <th scope="col">Apellido Materno</th>
                  <th scope="col">Fecha</th>
                  <th scope="col">Estado</th>
                  <th scope="col">Opciones</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let attendance of listAttendance; index as i">
                  <th scope="row">{{i+1}}</th>
                  <td>{{attendance.code_student}}</td>
                  <td>{{attendance.names}}</td>
                  <td>{{attendance.lastname_father}}</td>
                  <td>{{attendance.lastname_mother}}</td>
                  <td>{{attendance.created_at}}</td>
                  <td>
                    <div class="form-check form-switch">
                      <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked" checked>
                    </div>
                  </td>
                  <td class="d-flex">
                    <i class="bi bi-trash-fill col-md-6 cursor-pointer"  ></i>
                    <i class="bi bi-pencil-fill col-md-6 cursor-pointer"></i>
                  </td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</app-layout>
